{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nclass CanvasState {\n  constructor() {\n    this.canvas = null;\n    this.socket = null;\n    this.sessionid = null;\n    this.undoList = [];\n    this.redoList = [];\n    this.username = '';\n    makeAutoObservable(this);\n  }\n  setUsername(name) {\n    this.username = name;\n  }\n  setSessionId(id) {\n    this.sessionid = id;\n  }\n  setSocket(socket) {\n    this.socket = socket;\n  }\n  setCanvas(canvas) {\n    this.canvas = canvas;\n  }\n  pushToUndo(data) {\n    this.undoList.push(data);\n  }\n  pushToRedo(data) {\n    this.redoList.push(data);\n  }\n  undo() {\n    let ctx = this.canvas.getContext('2d');\n    if (this.undoList.length > 0) {\n      let dataURL = this.undoList.pop();\n      this.redoList.push(this.canvas.toDataURL());\n      let img = new Image();\n      img.src = dataURL;\n      img.onload = () => {\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n      };\n    } else {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n  }\n  redo() {\n    let ctx = this.canvas.getContext('2d');\n    if (this.redoList.length > 0) {\n      let dataURL = this.redoList.pop();\n      this.undoList.push(this.canvas.toDataURL());\n      let img = new Image();\n      img.src = dataURL;\n      img.onload = () => {\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n      };\n    } else {}\n  }\n}\nexport default new CanvasState();","map":{"version":3,"names":["makeAutoObservable","CanvasState","constructor","canvas","socket","sessionid","undoList","redoList","username","setUsername","name","setSessionId","id","setSocket","setCanvas","pushToUndo","data","push","pushToRedo","undo","ctx","getContext","length","dataURL","pop","toDataURL","img","Image","src","onload","clearRect","width","height","drawImage","redo"],"sources":["D:/prog/paint-online/client/src/store/canvasState.js"],"sourcesContent":["import { makeAutoObservable } from \"mobx\";\r\n\r\n\r\nclass CanvasState{\r\n    canvas= null\r\n    socket = null\r\n    sessionid = null\r\n    undoList =[]\r\n    redoList=[]\r\n    username=''\r\n    constructor(){\r\n        makeAutoObservable(this)\r\n    }\r\n    setUsername(name){\r\n        this.username = name\r\n    }\r\n    setSessionId(id) {\r\n        this.sessionid = id\r\n    }\r\n    setSocket(socket) {\r\n        this.socket = socket\r\n    }\r\n    setCanvas(canvas){\r\n        this.canvas = canvas\r\n    }\r\n\r\n    pushToUndo(data){\r\n        this.undoList.push(data)\r\n    }\r\n\r\n    pushToRedo(data){\r\n        this.redoList.push(data)\r\n    }\r\n\r\n    undo(){\r\n        let ctx= this.canvas.getContext('2d')\r\n        if(this.undoList.length > 0){\r\n            \r\n            let dataURL = this.undoList.pop()\r\n            this.redoList.push(this.canvas.toDataURL())\r\n            let img = new Image()\r\n            img.src = dataURL\r\n            img.onload=()=>{\r\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n                ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height)\r\n            }\r\n        }else{\r\n            ctx.clearRect(0,0,this.canvas.width, this.canvas.height)\r\n        }\r\n    }\r\n\r\n    redo(){\r\n        let ctx= this.canvas.getContext('2d')\r\n        if(this.redoList.length > 0){\r\n            let dataURL = this.redoList.pop()\r\n            this.undoList.push(this.canvas.toDataURL())\r\n            let img = new Image()\r\n            img.src = dataURL\r\n            img.onload=()=>{\r\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n                ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height)\r\n            }\r\n        }else{\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport default new CanvasState();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}