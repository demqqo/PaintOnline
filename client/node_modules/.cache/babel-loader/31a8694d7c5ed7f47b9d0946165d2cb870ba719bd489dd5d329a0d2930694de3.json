{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nclass CanvasState {\n  constructor() {\n    this.canvas = null;\n    this.undoList = [];\n    this.redoList = [];\n    makeAutoObservable(this);\n  }\n  setCanvas(canvas) {\n    this.canvas = canvas;\n  }\n  pushToUndo(data) {\n    this.undoList.push(data);\n  }\n  pushToRedo(data) {\n    this.redoList.push(data);\n  }\n  undo() {\n    let ctx = this.canvas.getContext('2d');\n    if (this.undoList.length > 0) {\n      this.pushToUndo(this.undoList[undoList.length]);\n      let dataURL = this.undoList.pop();\n      let img = new Image();\n      img.src = dataURL;\n      img.onload = () => {\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n      };\n    } else {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n  }\n  redo() {}\n}\nexport default new CanvasState();","map":{"version":3,"names":["makeAutoObservable","CanvasState","constructor","canvas","undoList","redoList","setCanvas","pushToUndo","data","push","pushToRedo","undo","ctx","getContext","length","dataURL","pop","img","Image","src","onload","clearRect","width","height","drawImage","redo"],"sources":["D:/prog/paint-online/src/store/canvasState.js"],"sourcesContent":["import { makeAutoObservable } from \"mobx\";\r\n\r\n\r\nclass CanvasState{\r\n    canvas= null\r\n    undoList =[]\r\n    redoList=[]\r\n    constructor(){\r\n        makeAutoObservable(this)\r\n    }\r\n    setCanvas(canvas){\r\n        this.canvas = canvas\r\n    }\r\n\r\n    pushToUndo(data){\r\n        this.undoList.push(data)\r\n    }\r\n\r\n    pushToRedo(data){\r\n        this.redoList.push(data)\r\n    }\r\n\r\n    undo(){\r\n        let ctx= this.canvas.getContext('2d')\r\n        if(this.undoList.length > 0){\r\n           \r\n            this.pushToUndo(this.undoList[undoList.length])\r\n            let dataURL = this.undoList.pop()\r\n            let img = new Image()\r\n            img.src = dataURL\r\n            img.onload=()=>{\r\n                ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n                ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height)\r\n            }\r\n        }else{\r\n            ctx.clearRect(0,0,this.canvas.width, this.canvas.height)\r\n        }\r\n    }\r\n\r\n    redo(){\r\n         \r\n    }\r\n}\r\n\r\nexport default new CanvasState();"],"mappings":"AAAA,SAASA,kBAAkB,QAAQ,MAAM;AAGzC,MAAMC,WAAW;EAIbC,WAAWA,CAAA,EAAE;IAAA,KAHbC,MAAM,GAAE,IAAI;IAAA,KACZC,QAAQ,GAAE,EAAE;IAAA,KACZC,QAAQ,GAAC,EAAE;IAEPL,kBAAkB,CAAC,IAAI,CAAC;EAC5B;EACAM,SAASA,CAACH,MAAM,EAAC;IACb,IAAI,CAACA,MAAM,GAAGA,MAAM;EACxB;EAEAI,UAAUA,CAACC,IAAI,EAAC;IACZ,IAAI,CAACJ,QAAQ,CAACK,IAAI,CAACD,IAAI,CAAC;EAC5B;EAEAE,UAAUA,CAACF,IAAI,EAAC;IACZ,IAAI,CAACH,QAAQ,CAACI,IAAI,CAACD,IAAI,CAAC;EAC5B;EAEAG,IAAIA,CAAA,EAAE;IACF,IAAIC,GAAG,GAAE,IAAI,CAACT,MAAM,CAACU,UAAU,CAAC,IAAI,CAAC;IACrC,IAAG,IAAI,CAACT,QAAQ,CAACU,MAAM,GAAG,CAAC,EAAC;MAExB,IAAI,CAACP,UAAU,CAAC,IAAI,CAACH,QAAQ,CAACA,QAAQ,CAACU,MAAM,CAAC,CAAC;MAC/C,IAAIC,OAAO,GAAG,IAAI,CAACX,QAAQ,CAACY,GAAG,CAAC,CAAC;MACjC,IAAIC,GAAG,GAAG,IAAIC,KAAK,CAAC,CAAC;MACrBD,GAAG,CAACE,GAAG,GAAGJ,OAAO;MACjBE,GAAG,CAACG,MAAM,GAAC,MAAI;QACXR,GAAG,CAACS,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAClB,MAAM,CAACmB,KAAK,EAAE,IAAI,CAACnB,MAAM,CAACoB,MAAM,CAAC;QAC1DX,GAAG,CAACY,SAAS,CAACP,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,CAACd,MAAM,CAACmB,KAAK,EAAE,IAAI,CAACnB,MAAM,CAACoB,MAAM,CAAC;MACnE,CAAC;IACL,CAAC,MAAI;MACDX,GAAG,CAACS,SAAS,CAAC,CAAC,EAAC,CAAC,EAAC,IAAI,CAAClB,MAAM,CAACmB,KAAK,EAAE,IAAI,CAACnB,MAAM,CAACoB,MAAM,CAAC;IAC5D;EACJ;EAEAE,IAAIA,CAAA,EAAE,CAEN;AACJ;AAEA,eAAe,IAAIxB,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}